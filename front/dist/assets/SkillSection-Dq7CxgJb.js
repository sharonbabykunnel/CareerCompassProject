import{u as q,r as i,j as s,M as z,h as j}from"./index-BaErjgBV.js";import{a as U}from"./module-CsqCC3th.js";import{g as W}from"./profileService-U3gRKk02.js";import{g as X}from"./educationService-Dap2o3RW.js";import{F as B}from"./popup-BXYOKbYg.js";import{P as G}from"./pencil-DW2knaSP.js";import{P as H}from"./plus-CBfyuqKy.js";import{F as J}from"./file-plus-D4cqOSeg.js";import{X as K}from"./x-BfwtZw6T.js";const ie=()=>{var v,E,w;const o=q(e=>e.presisted.user),[$,k]=i.useState(!1),[m,y]=i.useState(""),[a,p]=i.useState([]),[l,r]=i.useState(),[_,C]=i.useState([]),[F,M]=i.useState([]),[P,N]=i.useState(!1),[c,x]=i.useState([]),[u,b]=i.useState("");i.useEffect(()=>{(async()=>{k(!0);try{const[t,n,d]=await Promise.all([j.get(`/profile/skills/get/${o.uid}`),W(o.uid),X(o.uid)]);p(t!=null&&t.data?t.data:[]),C(n.data),M(d.data)}catch(t){console.error("Error fetching data:",t)}k(!1)})()},[o.uid]);const g=()=>N(!0),h=()=>N(!1),D=()=>{var e;m&&!((e=a==null?void 0:a.skills)!=null&&e.some(t=>t.skill==m))?(r(m),y("")):a!=null&&a.skills.some(t=>t.skill==m)&&B("Skill allready Exist")},I=e=>{r();const{[e]:t,...n}=selectedExperiences,{[e]:d,...f}=selectedEducations;setSelectedExperiences(n),setSelectedEducations(f)},L=e=>{b(e._id),r(e.skill),x(e.from),g()},S=(e,t,n)=>{x(d=>d!=null&&d.some(f=>f.id===t)?d.filter(f=>f.id!==t):[...d,{name:e,id:t,field:n}])},O=async()=>{try{const e=await j.post(`/profile/skills/post/${o.uid}`,{skill:l,from:c});p(e.data),h(),b(""),r(),x([])}catch(e){console.error("Error submitting skills:",e)}},A=async()=>{const e=await j.delete(`/profile/skills/delete/${o.uid}/${u}`);p(e.data),h(),b(""),r(),x([])},R=async()=>{const e=await j.put(`/profile/skills/edit/${o.uid}`,{id:u,skill:l,from:c});p(e.data),h(),b(""),r(),x([])};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 bg-gray-100 rounded-lg shadow-md mt-4 relative",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Skills"}),$?s.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center",children:s.jsx(U,{visible:!0,height:"80",width:"80",color:"#3333ff",ariaLabel:"three-dots-loading"})}):((v=a.skills)==null?void 0:v.length)>0?s.jsx("div",{className:"flex flex-wrap space-x-2 space-y-2",children:(E=a.skills)==null?void 0:E.map((e,t)=>s.jsxs("div",{className:"bg-gray-200 px-3 py-1 flex flex-grow justify-between rounded-md text-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"",children:e.skill.toUpperCase()},t),e.from&&s.jsx("div",{children:e.from.map(n=>s.jsx("div",{children:n.name},n.id))})]}),s.jsx(G,{onClick:()=>L(e)})]},e._id))}):s.jsx(H,{onClick:g,className:"m-auto h-9 w-9 hover:text-blue-600"}),((w=a.skills)==null?void 0:w.length)>0&&s.jsx(J,{className:"absolute top-[3%] right-[1%] h-8 w-8 hover:text-blue-500",onClick:g})]}),s.jsx(z,{isOpen:P,onRequestClose:h,className:"fixed inset-0 flex items-center justify-center z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-75",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg mx-auto overflow-y-auto max-h-[90vh]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add Skills"}),s.jsx(K,{onClick:h,className:"hover:text-red-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-2",children:"Skills (max 10)"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",value:m,onChange:e=>y(e.target.value),className:"w-full p-2 border rounded",placeholder:"Enter a skill"}),s.jsx("button",{type:"button",onClick:D,className:"ml-2 px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300",disabled:l,children:"Add"})]}),s.jsx("div",{className:"mt-2 flex flex-wrap",children:l&&s.jsxs("span",{className:"bg-gray-200 px-2 py-1 rounded m-1 flex items-center",children:[l,s.jsx("button",{type:"button",onClick:()=>I(),className:"ml-2 text-red-500",children:"Ã—"})]})})]}),l&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Where did you use these skills?"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"ml-4",children:[s.jsx("h4",{className:"font-medium",children:"Education"}),F.map(e=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`edu-${l}-${e._id}`,checked:c==null?void 0:c.some(t=>t.id===e._id),onChange:()=>S(e.institution,e._id,"educations"),className:"mr-2"}),s.jsx("label",{htmlFor:`edu-${l}-${e._id}`,children:e.institution})]},e._id))]}),s.jsxs("div",{className:"ml-4 mt-2",children:[s.jsx("h4",{className:"font-medium",children:"Experience"}),_.map(e=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`exp-${l}-${e._id}`,checked:c==null?void 0:c.some(t=>t.id===e._id),onChange:()=>S(e.company,e._id,"jobexperiences"),className:"mr-2"}),s.jsx("label",{htmlFor:`exp-${l}-${e._id}`,children:e.company})]},e._id))]})]},l)]}),s.jsxs("div",{className:`flex ${u?"justify-between":"justify-end"} space-x-2 mt-4`,children:[u&&s.jsx("button",{onClick:A,className:"px-4 py-2 bg-white rounded hover:bg-blue-600",children:"Delete"}),s.jsx("button",{onClick:u?R:O,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})]})};export{ie as default};
