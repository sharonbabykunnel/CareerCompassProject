import{c as v,o as N,a as y,r as o,u as C,B as c,V as w,j as s,h as l}from"./index-DNBWHiOW.js";import{_ as S}from"./lodash-fBqRUI97.js";import{S as k}from"./search-D8ZgcwT8.js";import{C as U}from"./clock-De5vQNiL.js";const B=({})=>{const d=v(),{socket:p}=N(),m=y(),[r,a]=o.useState([]),[_,u]=o.useState(""),i=C(e=>e.presisted.user.uid);o.useEffect(()=>{(async()=>{const t=await l.get("/connection/"+i);a(t.data)})(),p.on("newConnection",t=>{a(n=>[t,...n]),c("Connection Accepted By "+t.otherUser.name),d(w(t))})},[]);const h=async e=>{const t=await l.get(`/connection/connection/search/${i}?value=${e}`);a(t.data)},x=o.useMemo(()=>S.debounce(h,3e3),[]),f=e=>{m("/message",{state:{id:e}})},g=async e=>{try{const t=await l.delete("/connection/removeConnection/"+e);t.data&&(a(n=>n.filter(j=>j._id!=e)),c(t.data.message))}catch(t){c.error(t.message)}},b=e=>{u(e.target.value),x(e.target.value)};return s.jsxs("div",{className:" p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["connections(",r.length,")"]}),s.jsx("div",{className:"text-purple-600 cursor-pointer",children:"Sort by newly added"})]}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("input",{type:"text",placeholder:"Search",className:"w-full p-2 pl-10 border border-purple-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-600",onChange:b}),s.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),s.jsx("div",{className:"space-y-4",children:r==null?void 0:r.map(e=>s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:e.otherUser.profilePhoto||"https://cdn-icons-png.flaticon.com/128/3059/3059518.png",alt:e.name,className:"w-16 h-16 rounded-full mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold",children:e.otherUser.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.skills}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[s.jsx(U,{size:12,className:"mr-1"}),s.jsxs("span",{children:["Connected ",e.connectedTime]})]})]})]}),s.jsx("button",{className:"px-4 py-2 bg-white text-purple-600 border border-purple-600 rounded-full hover:bg-purple-100 transition-colors",onClick:()=>f(e.otherUser),children:"Message"}),s.jsx("button",{className:"px-4 py-2 bg-white text-purple-600 border border-purple-600 rounded-full hover:bg-purple-100 transition-colors",onClick:()=>g(e._id),children:"Remove Connection"})]},e._id))})]})};export{B as default};
