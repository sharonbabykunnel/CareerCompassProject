import{e as K,r as l,j as e,u as Q,h as g,M as W}from"./index-ClK_m8zv.js";import{u as Z}from"./formik.esm-DJSReezE.js";import{u as ee}from"./index-D0VsRAZI.js";import"./index.esm2017-CNxATXbe.js";import"./firebase-D7XoWCjm.js";import{E as se,a as te,J as ae}from"./JobApplicationOverview-CqH8aJYy.js";import{E as le}from"./ExperienceModal-CGmiTXnq.js";import{E as ne}from"./EducationModal-BncGWsoC.js";import{S as oe,F as ie}from"./popup-DRkXmpwR.js";import{u as re}from"./useUploadFile-CpyfJIUY.js";import{S as ce}from"./search-CkQwf2HO.js";import{M as R}from"./map-pin-DGVX_MjY.js";import{X as _}from"./x-BoneMfX0.js";import{B as de}from"./briefcase-business-4Rx6cH0y.js";import"./hoist-non-react-statics.cjs-De5jhhz5.js";import"./index.esm-BfpN0ylN.js";import"./profileService-4Lhq68NE.js";import"./educationService-4u_4aYSt.js";/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ue=({experiences:t,moveToEducation:i,moveBack:m,moveToExperience:c,removeClick:x,setExperiences:o})=>{const[d,r]=l.useState(!1),[j,N]=l.useState(!0),[v,p]=l.useState(!1),h=()=>{r(!0)},f=()=>{r(!1),c()};return e.jsxs("div",{children:[e.jsx(se,{experiences:t,removeClick:x}),e.jsx("div",{className:"text-blue-500 mt-4",onClick:h,children:"Add+"}),e.jsx(le,{closeEditModal:f,isEditModalOpen:d,newExp:j,setExpLoading:p,setExperiences:o}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"text-blue-500  px-4 hover:bg-blue-200 mr-4",onClick:m,children:"Back"}),e.jsx("button",{onClick:i,type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Next"})]})]})},xe=({education:t,moveToSubmit:i,moveBack:m,removeEdu:c,setEducation:x})=>{const[o,d]=l.useState(!1),[r,j]=l.useState(!0),N=()=>{d(!0)},v=()=>{d(!1)};return e.jsxs("div",{children:[e.jsx(te,{education:t,removeEdu:c}),e.jsx("div",{className:"text-blue-500 mt-4",onClick:N,children:"Add+"}),e.jsx(ne,{closeEditModal:v,isEditModalOpen:o,newEdu:r,setEducation:x}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"text-blue-500  px-4 hover:bg-blue-200 mr-4",onClick:m,children:"Back"}),e.jsx("button",{onClick:i,type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Next"})]})]})},pe=({formik:t,move:i})=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Name"}),e.jsx("input",{type:"text",name:"name",...t.getFieldProps("name"),className:"w-full p-2 border rounded"}),t.touched.name&&t.errors.name&&e.jsx("div",{className:"text-red-500 text-sm",children:t.errors.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Phone Number*"}),e.jsx("input",{type:"number",name:"name",...t.getFieldProps("number"),className:"w-full p-2 border rounded appearance-none"}),t.touched.number&&t.errors.number&&e.jsx("div",{className:"text-red-500 text-sm",children:t.errors.number})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Position*"}),e.jsx("input",{type:"text",name:"position",...t.getFieldProps("position"),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Email*"}),e.jsx("input",{type:"string",name:"email",...t.getFieldProps("email"),className:"w-full p-2 border rounded"}),t.touched.email&&t.errors.email&&e.jsx("div",{className:"text-red-500 text-sm",children:t.errors.email})]}),e.jsx("div",{className:"flex justify-end space-x-2 mt-4",children:e.jsx("button",{type:"button",onClick:i,className:"bg-blue-500 text-white px-4 hover:bg-blue-600 py-2 rounded",children:"Next"})})]}),he=()=>{const[t,i]=l.useState(!1),[m,c]=l.useState(null);return{downloadFile:l.useCallback(async(o,d)=>{i(!0),c(null);try{i(!1)}catch(r){console.error("Error downloading file:",r),c(r.message),i(!1)}},[]),isLoading:t,error:m}},be=({setValue:t,resume:i,moveToExperience:m,chosenResumeId:c,setChosenResumeId:x,moveBack:o,uploadedResume:d,setUploadedResume:r})=>{const j=l.useRef(null),{downloadFile:N,error:v}=he(),p=()=>{j.current.click()},h=n=>{const y=n.target.files[0];y&&(r(y),x("uploaded"),t("uploaded"))},f=n=>{x(n),t(n)},k=async n=>{N(n,"hhhh")},w=()=>{r(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Resume"}),e.jsx("p",{className:"text-gray-600",children:"Be sure to include an updated Resume"}),i.map(n=>e.jsxs("div",{className:"flex items-center justify-between w-full mr-4 border rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-l-lg font-semibold flex items-center",children:n.resume.split("name")[1].split("?")[0].split(".")[1]}),e.jsxs("div",{className:"ml-4 my-4",children:[e.jsx("div",{className:"text-lg font-medium",children:n.resume.split("name")[1].split("?")[0].replaceAll("%"," ")}),e.jsxs("div",{className:"text-gray-500 text-sm",children:["Last used on ",new Date(n.updatedAt).toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mr-4",children:[e.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>k(n.resume),children:e.jsx(me,{size:16})}),e.jsx("input",{type:"radio",name:"chosenResume",className:"w-4 h-4 border-2 border-green-600 rounded-full",checked:c===n._id,onChange:()=>f(n._id)})]})]},n._id)),d&&e.jsxs("div",{className:"flex items-center justify-between w-full  border rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"bg-red-600 flex items-center text-white px-4 py-1 rounded-l-lg font-semibold",children:d.name.split(".").pop()}),e.jsx("div",{className:"ml-4 my-4",children:e.jsx("div",{className:"text-lg font-medium",children:d.name})})]}),e.jsxs("div",{className:"flex items-center space-x-4 mr-4",children:[e.jsx("input",{type:"radio",name:"chosenResume",className:"w-4 h-4 border-2 border-green-600 rounded-full",checked:c==="uploaded",onChange:()=>f("uploaded")}),e.jsx("button",{onClick:w,children:"x"})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:j,style:{display:"none"},onChange:h,accept:".pdf,.doc,.docx"}),e.jsx("button",{type:"button",onClick:p,className:"border border-blue-500 text-blue-500 rounded mt-4 p-2 hover:bg-blue-50 transition-colors",disabled:d,children:"Upload resume"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"text-blue-500  px-4 hover:bg-blue-200 mr-4",onClick:o,children:"Back"}),e.jsx("button",{onClick:m,type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",disabled:!c,children:"Next"})]})]})},Re=()=>{const t=Q(s=>s.presisted.user),[i,m]=l.useState([]),[c,x]=l.useState(!1),[o,d]=l.useState({}),[r,j]=l.useState(""),[N,v]=l.useState(!1),[p,h]=l.useState(0),[f,k]=l.useState([]),[w,n]=l.useState([]),[y,M]=l.useState([]),[E,A]=l.useState(),[P,B]=l.useState(null),{uploadFile:D}=re(),[je,$]=l.useState();l.useEffect(()=>{(async()=>{try{const a=await g.get(`/job/getMyJobs/${t.uid}`);m(a.data)}catch(a){console.error("Error fetching jobs:",a)}})()},[t.uid]);const S=Z({initialValues:{name:t.name||"",position:t.position||"",number:t.number||"",email:t.email||"",resume:"",education:[],experience:[]},validationSchema:ee,onSubmit:async s=>{try{const a={...s,education:y.map(u=>u._id),experience:w.map(u=>u._id)};if(s.resume=="uploaded"){const u=await D(P,"resume",$),J=await g.post(`/profile/resume/add/${t.uid}`,{resume:u.resume});a.resume=J.data._id}else a.resume=E;const b=await g.post(`/job/apply/${t.uid}/${o._id}`,{payload:a});if(!(b!=null&&b.data))throw new Error("Allready applied");F(),oe("Application updated successfully"),m(u=>u.filter(J=>J._id!==o._id))}catch(a){ie(a.response?a.response.data.message:a.message)}}}),z=async s=>{try{await g.delete(`/job/remove/${s}/${t.uid}`),m(a=>a.filter(b=>b._id!==s))}catch(a){console.error("Error deleting job:",a)}},T=s=>{x(!0),d(s)},F=()=>{v(!1)},L=()=>{x(!1)},I=()=>{L(),v(!0),h(1)},V=s=>{S.setFieldValue("resume",s)},U=i.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.company.toLowerCase().includes(r.toLowerCase())),q=async()=>{var b;const s=await S.validateForm();if(s.name||s.number||s.position||s.email)return;const a=await g.get(`/profile/resume/get/${t.uid}`);k(a==null?void 0:a.data),A((b=a==null?void 0:a.data[0])==null?void 0:b._id),h(2)},O=async()=>{const s=await g.get(`/profile/experience/get/${t.uid}`);n(s.data),h(3)},H=async()=>{await S.setFieldValue("experience",w);const s=await g.get(`/education/get/${t.uid}`);M(s.data),h(4)},X=async()=>{await S.setFieldValue("education",y),h(5)},C=()=>{h(s=>s-1)},Y=s=>{n(a=>a.filter((b,u)=>u!=s))},G=s=>{M(a=>a.filter((b,u)=>u!=s))};return i.length<1?e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:e.jsx("div",{className:"flex justify-between mb-6",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Currently no Jobs for You, complete your profile! And wait "})})}):e.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-between mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["My Jobs (",i.length,")"]})}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search jobs",value:r,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),e.jsx("div",{className:"space-y-4",children:U.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:e.jsxs("div",{className:"flex justify-between items-center p-6",children:[e.jsxs("div",{className:"flex-grow cursor-pointer",onClick:()=>T(s),children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.company}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(R,{size:12,className:"mr-1"})," ",s.location]}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.jobType})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Created at ",new Date(s.createdAt).toLocaleDateString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("button",{onClick:()=>z(s._id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200",children:e.jsx(_,{size:20})})]})},s._id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Job Details"}),e.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{size:24})})]}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:o.title}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(R,{size:12,className:"mr-1"})," ",o.location]}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o.jobType}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:o.experienceLevel})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o.company}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx(de,{size:16}),e.jsx("span",{children:o.workplaceType})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"About the Job"}),e.jsx("p",{className:"text-gray-700",children:o.description})]}),e.jsx("button",{onClick:I,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors duration-200",children:"Apply Now"})]})})}),e.jsx(W,{isOpen:N,onRequestClose:F,className:"fixed inset-0 flex items-center justify-center z-50 ",overlayClassName:"fixed inset-0 bg-black bg-opacity-75",children:e.jsxs("div",{className:"bg-white m-4 p-6 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between   ",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Apply to ",o.title]}),e.jsx(_,{onClick:F})]}),e.jsxs("div",{className:"overflow-scroll scrollbar-hide",children:[p===1&&e.jsxs("div",{children:[e.jsx("h6",{children:"Contact info"}),e.jsx("img",{src:t.profilePhoto||"https://cdn-icons-png.flaticon.com/128/3059/3059518.png",alt:"",className:"rounded-full w-20"}),e.jsx("h4",{children:t.name}),e.jsx("p",{children:t.about})]}),e.jsx("form",{onSubmit:S.handleSubmit,children:p===1?e.jsx(pe,{formik:S,move:q}):p===2?e.jsx(be,{setValue:V,resume:f,moveToExperience:O,chosenResumeId:E,setChosenResumeId:A,moveBack:C,setUploadedResume:B,uploadedResume:P}):p===3?e.jsx(ue,{experiences:w,setExperiences:n,moveToEducation:H,moveToExperience:O,moveBack:C,removeClick:Y}):p===4?e.jsx(xe,{education:y,setEducation:M,moveToSubmit:X,moveBack:C,removeEdu:G}):p===5&&e.jsxs("div",{children:[e.jsx(ae,{user:t,education:y,experiences:w,resume:E!="uploaded"?[f.find(s=>s._id===E)]:[P],moveBack:C}),e.jsxs("div",{className:"flex justify-end my-4",children:[e.jsx("button",{type:"button",className:"text-blue-500  px-4 hover:bg-blue-200 mr-4",onClick:C,children:"Back"}),e.jsx("button",{type:"submit",className:"bg-blue-500 px-4 py-2 hover:bg-blue-600 rounded",children:"Submit application"})]})]})})]})]})})]})};export{Re as default};
