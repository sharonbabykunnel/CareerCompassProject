import{u as g,r as n,a as j,j as e,L as f,h as c}from"./index-DNBWHiOW.js";import{C as b}from"./clock-De5vQNiL.js";import{E as v}from"./ellipsis-BhpQ4qSj.js";const k=()=>{const d=g(s=>s.presisted.user),[a,l]=n.useState([]),[m,r]=n.useState(-1),o=n.useRef(),x=j();n.useEffect(()=>{(async()=>{const i=await c.get(`/job/getPostedJobs/${d.uid}`);l(i.data)})();const t=i=>{o.current&&!o.current.contains(i.target)&&r(-1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const h=s=>{r(s)},u=async s=>{await c.delete(`/job/delete/${s}`),l(t=>t.filter(i=>i._id!==s))},p=(s,t)=>{x(`/job/view-application/${t}`,{state:{job:a[s]}})};return a.length<1?e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:e.jsx("div",{className:"flex justify-between mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["No Job posted yet ,",e.jsx(f,{to:"/job/create-job",children:"post one in a minute"})]})})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h1",{className:"text-2xl font-bold",children:["Posted jobs(",a.length,")"]})}),e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.map((s,t)=>e.jsxs("div",{className:"flex  justify-between bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"flex items-center",onClick:()=>p(t,s._id),children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.company}),e.jsx("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:e.jsxs("span",{children:["Location: ",s.location]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{size:12,className:"mr-1"}),e.jsxs("span",{children:["Created at ",new Date(s.createdAt).toLocaleDateString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}),e.jsx("div",{className:"flex ",children:e.jsx(v,{onClick:()=>h(t)})}),m===t&&e.jsx("div",{ref:o,className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:e.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>u(s._id),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",children:"Delete Post"})})})})]},s._id))})]})};export{k as default};
