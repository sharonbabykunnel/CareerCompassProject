import{r as a,u as $,b as q,j as e,L as F,n as I,M as N,h as c}from"./index-BBP4RcZY.js";import{J as T}from"./JobApplicationOverview-B7Onmn-Q.js";import{S as w}from"./popup-fZhumcd1.js";import{A as z}from"./arrow-left-B1KsUWsi.js";import{B,M as J}from"./mail-CPp0hHc6.js";import{F as P}from"./file-text-BJ4K_bms.js";import{C as X}from"./clock-D7AApRCD.js";import{X as y}from"./x-BtxIw1Me.js";import"./index-_lqXqqJX.js";import"./index.esm-BkRXQom6.js";const se=({jobs:G})=>{const[x,u]=a.useState([]),n=$(t=>t.presisted.user),k=q(),[s,d]=a.useState(null),{id:C}=k.state||{},[S,i]=a.useState(!1),[A,r]=a.useState(!1),[p,M]=a.useState(!0),[h,o]=a.useState(""),[f,b]=a.useState(),[j,g]=a.useState("");a.useEffect(()=>{(async()=>{const l=await c.get(`/job/applications/get/${C}`);u(l.data)})()},[]);const E=async t=>{const l=await c.get(`/job/application/get/${t}`);l.data[0].details&&(o(l.data[0].details.email),b(l.data[0].details.time),g(l.data[0].details.time),M(!1)),d(l.data[0]),i(!0)},v=()=>{i(!1)},O=async()=>{(await c.patch(`/job/application/reject/${s._id}`)).data&&(w("Rejected"),i(!1),r(!1),u(l=>l.filter(L=>L._id!=s._id)),d(null))},R=async()=>{(await c.patch(`/job/application/accept/${s._id}`,{date:f,time:j,email:h})).data&&(w("Scheduled"),i(!1),r(!1),d(null))},_=()=>{o(n==null?void 0:n.email),r(!0)},m=()=>{r(!1)};return x.length<1?e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center mb-6 gap-2",children:[e.jsxs(F,{to:"/job/posted-jobs",children:[e.jsx(z,{className:"hover:text-blue-600"})," "]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"No applications yet"})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Applications"}),e.jsx("div",{className:"space-y-4 overflow-scroll scrollbar-hide",children:x.map(t=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:t.name}),e.jsxs("p",{className:"text-gray-600 flex items-center mt-1",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),t.position,e.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium  ${t.status==="accept"?"text-green-800 bg-green-100":"text-blue-800 bg-blue-100"} `,children:t.status})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>E(t._id),className:"p-4 rounded  bg-blue-500",children:t.status==="accept"?"Reschedule":"Take application"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center flex-wrap ",children:[e.jsx(P,{className:"mr-2"}),e.jsx("a",{href:t.resume.resume,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:t.resume.resume.split("name")[1].split("?")[0].replaceAll("%"," ")||`Resume ${index+1}`})]}),e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Applied: ",new Date(t.createdAt).toLocaleDateString()," "]}),e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),t.email]}),e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),t.number]})]})]},t._id))}),e.jsx(N,{isOpen:S,onRequestClose:v,className:"fixed inset-0 flex items-center justify-center z-50 ",overlayClassName:"fixed inset-0 bg-black bg-opacity-75",children:e.jsxs("div",{className:"bg-white m-4 p-6 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-between   ",children:e.jsx(y,{onClick:v})}),e.jsxs("div",{className:"overflow-scroll scrollbar-hide",children:[s&&e.jsx(T,{user:s==null?void 0:s.user,experiences:s==null?void 0:s.experience,education:s==null?void 0:s.education,resume:[s==null?void 0:s.resume]}),(s==null?void 0:s.details)&&(s==null?void 0:s.status)==="accepted"&&e.jsx("div",{children:e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:["scheduled for ",e.jsx("span",{className:"text-green-600",children:new Date(s.details.date).toLocaleDateString()})]}),e.jsxs("p",{children:["time : ",s.details.time]}),e.jsxs("p",{children:["If any doubts regardign interview contact on ",s.details.email]})]})})}),e.jsxs("div",{className:"flex justify-end my-4",children:[e.jsx("button",{type:"button",className:"text-blue-500  px-4 hover:bg-blue-200 mr-4",onClick:O,children:(s==null?void 0:s.status)==="accepted"?"leave":"Reject"}),e.jsx("button",{type:"submit",className:"bg-blue-500 px-4 py-2 hover:bg-blue-600 rounded",onClick:_,children:"Accept and shedule interview"})]})]})]})}),e.jsx(N,{isOpen:A,onRequestClose:m,className:"fixed inset-0 flex items-center justify-center z-50 mt-[80px]",overlayClassName:"fixed inset-0 bg-black bg-opacity-75",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg mx-auto h overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-2xl font-semibold",children:[p?"Schedule":"Edit"," Interview"]}),e.jsx(y,{className:"cursor-pointer",onClick:m})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"interview-date",className:"block text-sm font-medium text-gray-700",children:"Interview Date"}),e.jsx("input",{type:"date",id:"interview-date",value:f,onChange:t=>b(t.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"interview-time",className:"block text-sm font-medium text-gray-700",children:"Interview Time"}),e.jsx("input",{type:"time",id:"interview-time",value:j,onChange:t=>g(t.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Contact Email"}),e.jsx("input",{type:"email",id:"email",value:h,placeholder:"Enter contact email",onChange:t=>o(t.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",className:"text-gray-500 px-4 py-2 rounded-md hover:bg-gray-200 mr-2",onClick:m,children:"Cancel"}),e.jsxs("button",{onClick:R,type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:[p?"Add":"Save"," Confrim"]})]})]})]})})]})};export{se as default};
