import{j as s,b as v,B as f}from"./index-BCbUohwl.js";import{r as a,u as P}from"./vendor-DoS0LqYF.js";import{B as w}from"./url-C7Fa9dY1.js";import{j as k}from"./index-BmBSCerI.js";import"./chart-Bxe9v4kL.js";const S=()=>{const[r,m]=a.useState([]),[l,b]=a.useState(0),[t,j]=a.useState(1),g=P(),c=10,u=async()=>{try{const e=await v.get(`${w}/admin/getAllPosts/${t}`);m(e.data.posts[1]),b(e.data.posts[0])}catch(e){f.error(e.message)}},p=e=>{g("/admin/post",{state:{post:r[e]}})},n=e=>j(e);a.useEffect(()=>{u()},[t]);const y=e=>{const{text:i,images:d,video:N}=e.content,x=[...d||[],...N||[]];return s.jsx("div",{className:"mb-4",children:x.length>0&&s.jsx(k.Carousel,{showThumbs:!1,children:x.map((o,h)=>s.jsx("div",{children:d&&d.includes(o)?s.jsx("img",{src:o,alt:`Content ${h+1}`,className:"w-1/2 object-cover"}):s.jsx("video",{src:o,controls:!0,className:"w-1/2  object-cover"})},h))})})};return s.jsxs("div",{className:"users-management bg-lavender-100 p-6 rounded-lg shadow-md  h-[80vh] flex flex-col ",children:[s.jsx("div",{className:"header mb-6",children:s.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Post Management"})}),s.jsx("div",{className:"table-container bg-white rounded-lg scrollbar-hide flex-grow overflow-scroll",children:s.jsxs("table",{className:"w-full ",children:[s.jsx("thead",{className:"bg-lavender-200",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"py-3 px-4",children:"Content"}),s.jsx("th",{className:"py-3 px-4",children:"User"}),s.jsx("th",{className:"py-3 px-4",children:"Post date"}),s.jsx("th",{className:"py-3 px-4",children:"status"}),s.jsx("th",{className:"py-3 px-4",children:"Option"})]})}),s.jsx("tbody",{className:"",children:Array.isArray(r)&&r.map((e,i)=>s.jsxs("tr",{className:`border-b ${e!=null&&e.isBlocked?"bg-red-600":(e==null?void 0:e.reported)&&(e==null?void 0:e.reported.length)>0&&"bg-red-100"} border-lavender-100 hover:bg-lavender-50`,children:[s.jsx("td",{className:"py-3 px-4 flex items-center",children:y(e)}),s.jsx("td",{className:"py-3 px-4",children:e.user[0].name}),s.jsx("td",{className:"py-3 px-4",children:new Date(e.createdAt).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${e!=null&&e.isBlocked?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"}`,children:e.isBlocked?"Blocked":"Unblocked"})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("td",{onClick:()=>p(i),className:"py-2 px-4 border-b text-center text-sm text-blue-600 cursor-pointer hover:text-blue-500",children:"View More"})})]},e._id))})]})}),s.jsxs("div",{className:"flex justify-center mt-4 space-x-1",children:[s.jsx("button",{className:`px-4 py-2 border rounded-l-lg ${t===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,onClick:()=>n(t-1),disabled:t===1,children:"Previous"}),[...Array(Math.ceil(l/c)).keys()].map(e=>s.jsx("button",{className:`px-4 py-2 border ${t===e+1?"bg-gray-300":"hover:bg-gray-200"}`,onClick:()=>n(e+1),children:e+1},e)),s.jsx("button",{className:`px-4 py-2 border rounded-r-lg ${t===Math.ceil(l/c)?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,onClick:()=>n(t+1),disabled:t===Math.ceil(l/c),children:"Next"})]})]})};export{S as default};
